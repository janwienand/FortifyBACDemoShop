import sqlite3

# Connect to the database
conn = sqlite3.connect('shopping.db')

# Create the users table
conn.execute('''CREATE TABLE users
             (username TEXT PRIMARY KEY NOT NULL,
             password TEXT NOT NULL,
             role TEXT NOT NULL);''')

# Insert some example users
conn.execute("INSERT INTO users (username, password, role) VALUES ('Alice', 'secret', 'admin')")
conn.execute("INSERT INTO users (username, password, role) VALUES ('Bob', 'secret', 'user')")

# Create the products table
conn.execute('''CREATE TABLE products
             (id INTEGER PRIMARY KEY AUTOINCREMENT,
             name TEXT NOT NULL,
             description TEXT,
             price REAL NOT NULL);''')

# Insert some example products
conn.execute("INSERT INTO products (name, description, price) VALUES ('iPhone 12', 'The latest iPhone from Apple', 999.99)")
conn.execute("INSERT INTO products (name, description, price) VALUES ('Samsung Galaxy S21', 'The latest Android phone from Samsung', 799.99)")
conn.execute("INSERT INTO products (name, description, price) VALUES ('Google Pixel 5', 'The latest Pixel phone from Google', 699.99)")

# Create the cart table
conn.execute('''CREATE TABLE cart
             (username TEXT NOT NULL,
             product_id INTEGER NOT NULL,
             quantity INTEGER NOT NULL,
             PRIMARY KEY (username, product_id),
             FOREIGN KEY (username) REFERENCES users(username),
             FOREIGN KEY (product_id) REFERENCES products(id));''')

# Save changes and close the connection
conn.commit()
conn.close()
